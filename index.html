<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jana & Michal â€“ Svatba</title>
  <meta name="description" content="Svatba Jany a Michala â€“ Statek U nÃ¡s, OkÅ™esaneÄ. MÃ­sto, harmonogram, RSVP a rozvozy.">

  <!-- Fonty -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet">

  <!-- Leaflet (CSS + JS) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- Styl -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- HERO -->
  <header class="hero" id="uvod">
    <div class="hero__overlay"></div>
    <div class="hero__head">
      <h1 class="names">Jana <span>&</span> Michal</h1>

      <!-- ÃšvodnÃ­ bublina -->
      <div class="bubble intro-bubble">
        SrdeÄnÄ› vÃ¡s zveme, abyste s nÃ¡mi proÅ¾ili nÃ¡Å¡ velkÃ½ den plnÃ½ lÃ¡sky, smÃ­chu a tance ğŸ’š
      </div>

      <!-- OdpoÄÃ­tÃ¡vÃ¡nÃ­ -->
      <div class="bubble countdown-bubble" data-target="2026-05-30T12:00:00+02:00">
        <span><span id="dny">--</span> dnÃ­</span>
        <span><span id="hodiny">--</span> hod</span>
        <span><span id="minuty">--</span> min</span>
        <span><span id="vteriny">--</span> s</span>
      </div>

      <!-- Datum a mÃ­sto -->
      <div class="bubble chip chip--main">30. kvÄ›tna 2026 â€¢ 12:00 â€¢ Statek U nÃ¡s, OkÅ™esaneÄ</div>
    </div>
  </header>

  <main class="stack">
    <!-- BLOK 1: MÃ­sto konÃ¡nÃ­ -->
    <section id="blok-misto" class="block card">
      <div class="block__inner">
        <header class="block__head">
          <h2>MÃ­sto konÃ¡nÃ­</h2>
        </header>

        <div class="columns columns--place">
          <div class="col col--text">
            <p><strong>Statek U nÃ¡s</strong></p>
            <p class="address">OkÅ™esaneÄ 12, OkÅ™esaneÄ</p>
            <ul class="list">
              <li>ParkovÃ¡nÃ­: pÅ™Ã­mo u statku.</li>
            </ul>
          </div>

          <div class="col col--map">
            <div class="map-clean map-box">
              <div id="map" class="leaflet-host"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="spacer" aria-hidden="true"></section>
<section class="spacer" aria-hidden="true"></section>

<!-- BLOK: ObÅ™ad -->
<section id="blok-obrad" class="block card">
  <div class="block__inner">
    <header class="block__head">
      <h2>ObÅ™ad</h2>
      <p class="lead">
        ObÅ™ad zaÄÃ­nÃ¡ ve <strong>12:00</strong>.<br>
        Pro vÃ¡Å¡ klid a pohodlÃ­ doporuÄujeme pÅ™ijet kolem <strong>11:00</strong>,
        dÃ¡t si nÄ›co dobrÃ©ho a zaÄÃ­t si uÅ¾Ã­vat den.
      </p>
    </header>
  </div>
</section>

<section class="spacer" aria-hidden="true"></section>

    <!-- BLOK: Dresscode -->
<section id="blok-dresscode" class="block card">
  <div class="block__inner">
    <header class="block__head">
      <h2>Dresscode</h2>
    </header>

    <div class="dresscode-text">
      <p>ğŸ‘— PÅ™ijÄte prosÃ­m ve spoleÄenskÃ©m obleÄenÃ­. Na veÄernÃ­ party se klidnÄ› pÅ™evlÃ©knÄ›te do pohodlnÄ›jÅ¡Ã­ho obleÄenÃ­.</p>

      <p>ğŸ’ƒ <strong>DÃ¡my</strong>, prosÃ­m, pro tento den vynechte bÃ­lou a Äervenou.  
      NezapomeÅˆte zvolit vhodnou obuv â€“ vysokÃ© podpatky nebudou vzhledem k mÃ­stu konÃ¡nÃ­ ideÃ¡lnÃ­.</p>

      <p>ğŸ¤µ <strong>PÃ¡novÃ©</strong>, oblek ani lakÃ½rky nejsou nutnostÃ­, ale mÄ›jte na pamÄ›ti, Å¾e jde o spoleÄenskou udÃ¡lost.</p>
    </div>
  </div>
</section>

<section class="spacer" aria-hidden="true"></section>

    <!-- BLOK: UbytovÃ¡nÃ­ -->
<section id="blok-ubytovani" class="block card">
  <div class="block__inner">
    <header class="block__head">
      <h2>UbytovÃ¡nÃ­</h2>
    </header>

    <div class="ubytovani-text">
      <p>ğŸ¡ UbytovÃ¡nÃ­ je moÅ¾nÃ© pÅ™Ã­mo na statku.  
      VyplÅˆte prosÃ­m zÃ¡jem o pÅ™espÃ¡nÃ­ v dotaznÃ­ku a postel bude vaÅ¡e!</p>
    </div>
  </div>
</section>

<section class="spacer" aria-hidden="true"></section>


    <!-- BLOK 2: Harmonogram -->
    <section id="blok-program" class="block card">
      <div class="block__inner">
        <header class="block__head">
          <h2>Harmonogram dne</h2>
          <p class="lead">Å½Ã¡dnÃ© Äasy, Å¾Ã¡dnÃ½ stres â€“ prostÄ› si to spolu uÅ¾ijeme ğŸ’š</p>
        </header>

        <div class="timeline hearts">
          <div class="item"><div class="title">ğŸ’š Vezmeme se</div></div>
          <div class="item"><div class="title">ğŸ’š NajÃ­me se</div></div>
          <div class="item"><div class="title">ğŸ’š Budeme se bavit</div></div>
        </div>
      </div>
    </section>

    <section class="spacer" aria-hidden="true"></section>

    <!-- BLOK 3: RSVP -->
    <section id="blok-rsvp" class="block card">
      <div class="block__inner">
        <header class="block__head">
          <h2>PotvrzenÃ­ ÃºÄasti (RSVP)</h2>
          <p class="lead">ProsÃ­me o potvrzenÃ­ ÃºÄasti do <strong>30. dubna 2026</strong>.</p>
        </header>

        <div class="note-whatsapp bubble bubble--soft">
          MÃ¡me spoleÄnou fotku? Budeme rÃ¡di, kdyÅ¾ nÃ¡m ji poÅ¡lete pÅ™es WhatsApp ğŸ™
          <!-- nahraÄte ÄÃ­slo bez mezer a bez + -->
          <a href="https://wa.me/420777000000" target="_blank" rel="noreferrer" class="wa">Odeslat na WhatsApp</a>
        </div>

        <form id="rsvp-form" class="form" action="/api/rsvp" method="post">
          <div class="form__row">
            <label>JmÃ©no a pÅ™Ã­jmenÃ­</label>
            <input id="f-name" name="name" required placeholder="VaÅ¡e jmÃ©no" />
          </div>

          <div class="form__row">
            <label>PoÄet osob</label>
            <input id="f-people" name="people" type="number" min="1" placeholder="1" />
          </div>

          <div class="form__row">
            <label>E-mail</label>
            <input id="f-email" name="email" type="email" required placeholder="vas@email.cz" />
          </div>

          <div class="form__row form__row--full">
            <label>StravovacÃ­ omezenÃ­ / alergie / vzkaz</label>
            <textarea id="f-note" name="note" rows="3" placeholder="Alergie, bezlepkovÃ©..."></textarea>
          </div>

          <div class="form__row">
            <label>Chci odvoz</label>
            <div class="radio-row">
              <label><input type="radio" name="ride" value="ANO"> ANO</label>
              <label><input type="radio" name="ride" value="NE" checked> NE</label>
            </div>
          </div>

          <div class="form__row">
            <label>Chci pÅ™espat</label>
            <div class="radio-row">
              <label><input type="radio" name="sleep" value="ANO"> ANO</label>
              <label><input type="radio" name="sleep" value="NE" checked> NE</label>
            </div>
          </div>

          <div id="rsvp-msg" class="form__msg" aria-live="polite" style="display:none;"></div>
          <button class="btn primary" type="submit">Odeslat</button>
        </form>
      </div>
    </section>

    <section class="spacer" aria-hidden="true"></section>

    <!-- BLOK 4: Doprava a rozvozy -->
    <header class="block__head">
  <h2>Doprava a rozvozy</h2>
  <p class="lead">AÅ¥ se nestarÃ¡te o cestu domÅ¯ ğŸš•</p>
</header>

<div class="rozvozy-text">
  <p>
    AÅ¥ se nestarÃ¡te o to, jak se dostanete zpÄ›t domÅ¯, bude od <strong>20:00</strong> k dispozici rozvoz po okolÃ­.  
    Budeme ale rÃ¡di, kdyÅ¾ s nÃ¡mi strÃ¡vÃ­te co nejvÃ­ce Äasu a uÅ¾ijete si veÄer naplno.
  </p>

  <p>
    VyplÅˆte prosÃ­m zÃ¡jem o taxi v dotaznÃ­ku.  
    ÄŒÃ­slo na taxi <em>doplnÃ­me pozdÄ›ji</em>.
  </p>
</div>

  <!-- OdpoÄÃ­tÃ¡vÃ¡nÃ­ -->
  <script>
    function initCountdown(){
      const el = document.querySelector('.countdown-bubble');
      if(!el) return;
      const target = new Date(el.getAttribute('data-target'));
      const dEl = document.getElementById('dny');
      const hEl = document.getElementById('hodiny');
      const mEl = document.getElementById('minuty');
      const sEl = document.getElementById('vteriny');
      function tick(){
        const now = new Date();
        let diff = Math.max(0, target - now);
        const d = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff / (1000*60*60)) % 24);
        const m = Math.floor((diff / (1000*60)) % 60);
        const s = Math.floor((diff / 1000) % 60);
        dEl.textContent = String(d).padStart(2,'0');
        hEl.textContent = String(h).padStart(2,'0');
        mEl.textContent = String(m).padStart(2,'0');
        sEl.textContent = String(s).padStart(2,'0');
      }
      tick(); setInterval(tick, 1000);
    }
    document.addEventListener('DOMContentLoaded', initCountdown);
  </script>

  <!-- Mapa -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const lat = 49.847724;
      const lon = 15.469921;

      const mapEl = document.getElementById('map');
      if (!mapEl) return;

      const map = L.map(mapEl, { zoomControl: true, attributionControl: false });
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

      map.setView([lat, lon], 15);
      // jemnÃ© sloÅ¾enÃ­ kompozice: trochu doprava a nahoru
      map.panBy([+30, -20]);
      setTimeout(() => map.invalidateSize(), 300);
    });
  </script>

  <!-- OdesÃ­lÃ¡nÃ­ RSVP -->
  <script>
    (function(){
      const form = document.getElementById("rsvp-form");
      const msg  = document.getElementById("rsvp-msg");
      if(!form) return;

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        msg.style.display = "none";

        const payload = {
          name:   document.getElementById("f-name").value.trim(),
          people: document.getElementById("f-people").value,
          email:  document.getElementById("f-email").value.trim(),
          note:   document.getElementById("f-note").value.trim(),
          ride:   (form.querySelector('input[name="ride"]:checked')?.value || "NE"),
          sleep:  (form.querySelector('input[name="sleep"]:checked')?.value || "NE"),
        };

        try {
          const res  = await fetch("/api/rsvp", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if (res.ok && data.ok) {
            msg.textContent = "DÄ›kujeme! VaÅ¡e potvrzenÃ­ bylo odeslÃ¡no.";
            msg.className = "form__msg ok";
            msg.style.display = "block";
            form.reset();
          } else {
            throw new Error(data?.error || "Chyba pÅ™i odesÃ­lÃ¡nÃ­.");
          }
        } catch (err) {
          console.error(err);
          msg.textContent = "OmlouvÃ¡me se, zprÃ¡vu se nepodaÅ™ilo odeslat. Zkuste to prosÃ­m znovu.";
          msg.className = "form__msg err";
          msg.style.display = "block";
        }
      });
    })();
  </script>
</body>
</html>
